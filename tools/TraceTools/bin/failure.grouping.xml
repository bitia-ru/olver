<?xml version="1.0" encoding="UTF-8"?>
<og:choice xmlns:og="http://unitesk.com/buncher"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://unitesk.com/buncher http://unitesk.com/buncher/groupingSchema.xsd" >
    <og:if>
        <og:predicate>
            <![CDATA[
                knownBugs.length > 0
             ]]>
            </og:predicate>
        <og:constGroupName>known bugs</og:constGroupName>
    </og:if>
    <og:groupBy>
        <og:function>
            <![CDATA[
                result = UNDEFINED;
                var bug_0 = knownBugs[ 0 ];
                if( bug_0.hasProperty( "package" ) )
                    result = bug_0.getProperty( "package" );
                
                if(    result == UNDEFINED
                    && modelOperation != null
                    && modelOperation[ "package" ] != null 
                  )
                    result = modelOperation[ "package" ];
                ]]>
        </og:function>
        <og:varGroupName>
            <![CDATA[
            if( funcValue != UNDEFINED )
                result = funcValue;
            else
                result = "unknown package";
            ]]>
        </og:varGroupName>
        <og:groupBy>
            <og:function>
                <![CDATA[
                    result = UNDEFINED;
                    var bug_0 = knownBugs[ 0 ];
                    if( bug_0.hasProperty( "operationName" ) )
                        result = bug_0.getProperty( "operationName" );
            
                    if(    result == UNDEFINED
                        && modelOperation != null
                        && modelOperation.name != null
                      )
                        result = modelOperation.name;
                ]]>
            </og:function>
            <og:varGroupName>
                <![CDATA[
                    if( funcValue != UNDEFINED )
                        result = funcValue;
                    else
                        result = "unknown model operation";
                ]]>
            </og:varGroupName>
            <og:groupBy>
                <og:function>knownBugs[ 0 ].id</og:function>
                <og:varGroupName>funcValue</og:varGroupName>
                <og:leaf />
            </og:groupBy>
        </og:groupBy>
    </og:groupBy>
    
    <og:if>
        <og:predicate>
            <![CDATA[
            result = false;
            for( var i = 0; i < properties.size(); i ++ )
            {
                if( properties.get( i ).startsWith( "req_id." ) )
                {
                    result = true;
                    break;
                }
            }
            ]]>
        </og:predicate>
        <og:constGroupName>req failures</og:constGroupName>
    </og:if>
        <og:groupBy>
            <og:function>
                <![CDATA[
                    if(    modelOperation != null
                        && modelOperation[ "package" ] != null 
                      )
                        result = modelOperation[ "package" ];
                    else
                        result = UNDEFINED;
            ]]>
            </og:function>
            <og:varGroupName>
                <![CDATA[
                    if( funcValue != UNDEFINED )
                        result = funcValue;
                    else
                        result = "unknown package";
                ]]>
            </og:varGroupName>
            <og:groupBy>
                <og:function>
                    <![CDATA[
                        if(    modelOperation != null
                            && modelOperation.name != null
                          )
                            result = modelOperation.name;
                        else
                            result = UNDEFINED;
                    ]]>
                </og:function>
                <og:varGroupName>
                    <![CDATA[
                        if( funcValue != UNDEFINED )
                            result = funcValue;
                        else
                            result = "unknown model operation";            
                    ]]>
                </og:varGroupName>
                <og:leaf/>
            </og:groupBy>
        </og:groupBy>
    
     <og:default>
        <og:constGroupName>other failures</og:constGroupName>
    </og:default>
    <og:switch>
        <og:function>kind</og:function>
        <og:case>
            <og:value>POSTCONDITION_FAILED</og:value>
            <og:value>INVARIANT_FAILED</og:value>
            <og:constGroupName>postcondition violation</og:constGroupName>
        </og:case>
            <og:groupBy>
                <og:function>
                    <![CDATA[
                        if(    modelOperation != null
                            && modelOperation[ "package" ] != null 
                          )
                            result = modelOperation[ "package" ];
                        else
                            result = UNDEFINED;
                    ]]>
                </og:function>
                <og:varGroupName>
                    <![CDATA[
                        if( funcValue != UNDEFINED )
                            result = funcValue;
                        else
                            result = "unknown package";
                    ]]>
                </og:varGroupName>
                <og:groupBy>
                    <og:function>
                        <![CDATA[
                            if(    modelOperation != null
                                && modelOperation.name != null
                              )
                                result = modelOperation.name;
                            else
                                result = UNDEFINED;
                        ]]>
                    </og:function>
                    <og:varGroupName>
                        <![CDATA[
                            if( funcValue != UNDEFINED )
                                result = funcValue;
                            else
                                result = "unknown model operation";
                        ]]>
                    </og:varGroupName>
                    <og:leaf/>
                </og:groupBy>
            </og:groupBy>

        <og:case>
            <og:value>SCENARIO_FUNCTION_FAILED</og:value>
            <og:constGroupName>extra assertion violation</og:constGroupName>
        </og:case>
            <og:leaf/>

        <og:case>
            <og:value>MEDIATOR_FAILED</og:value>
            <og:constGroupName>target function failures</og:constGroupName>
        </og:case>
            <og:groupBy>
                <og:function>
                    <![CDATA[
                        if(    modelOperation != null
                            && modelOperation[ "package" ] != null 
                          )
                            result = modelOperation[ "package" ];
                        else
                            result = UNDEFINED;
                    ]]>
                </og:function>
                <og:varGroupName>
                    <![CDATA[
                        if( funcValue != UNDEFINED )
                            result = funcValue;
                        else
                            result = "unknown package";
                    ]]>
                </og:varGroupName>
                <og:groupBy>
                    <og:function>
                        <![CDATA[
                            if(    modelOperation != null
                                && modelOperation.name != null
                              )
                                result = modelOperation.name;
                            else
                                result = UNDEFINED;
                        ]]>
                    </og:function>
                    <og:varGroupName>
                        <![CDATA[
                            if( funcValue != UNDEFINED )
                                result = funcValue;
                            else
                                result = "unknown model operation";
                        ]]>
                    </og:varGroupName>
                    <og:leaf/>
                </og:groupBy>
            </og:groupBy>        

        <og:case>
            <og:value>INCORRECT_SET_OF_INTERACTIONS</og:value>
            <og:value>SERIALIZATION_FAILED</og:value>
            <og:constGroupName>serialization failures</og:constGroupName>
        </og:case>
        <og:case>
            <og:value>PRECONDITION_FAILED</og:value>
            <og:value>UNCONNECTED_GRAPH</og:value>
            <og:value>NONDETERMINISTIC_GRAPH</og:value>
            <og:value>SCENARIO_INITIALIZATION_FAILED</og:value>
            <og:value>INVALID_SCENARIO</og:value>
            <og:value>NONDETERMINISTIC_MODEL</og:value>
            <og:constGroupName>test failures</og:constGroupName>
        </og:case>
        <og:case>
            <og:value>INTERNAL_ERROR</og:value>
            <og:value>UNKNOWN_KIND</og:value>
            <og:constGroupName>internal failures</og:constGroupName>
        </og:case>
        <og:case>
            <og:value>STRUCTURAL_FAILURE</og:value>
            <og:constGroupName>structural failures</og:constGroupName>
        </og:case>
            <og:leaf/>
    </og:switch>
</og:choice>